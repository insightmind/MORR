\chapter{Global test cases}
\label{ch:tests}

%%Cannot use requirementscope as we have to inject additional text into the label
\newcounter{counterTC}

\makeatletter
\newcommand{\fmt}[1]{(tests \specref{#1}\checknextarg}
\newcommand{\checknextarg}{\@ifnextchar\bgroup{\consumenextarg}{)}}
\newcommand{\consumenextarg}[1]{, \specref{#1}\@ifnextchar\bgroup{\consumenextarg}{)}}
\makeatother

\newcommand{\test}[5]{\addtocounter{counterTC}{10}
\item[TC\arabic{counterTC}\phantomsection\label{TC\arabic{counterTC}}\\\begin{footnotesize}\textit{#1}\end{footnotesize}]
    \begin{itemize}[noitemsep]
        \item[]{\textbf{#2}} %title
        \item[]{Precondition: #3}
        \item[]{Test steps: #4}
        \item[]{Expected result: #5}
    \end{itemize}
}

\newenvironment{tests}{\begin{itemize}[font = \normalfont, style = multiline, labelwidth = 60pt, leftmargin = !]}{\end{itemize}}

\section{Per-module test cases}

\subsection{System module test cases}

\subsubsection{Window-management module test cases}

\begin{tests}
	\test{\fmt{FS70}{FS54}{FS20}{FS30}{FS250}{FS401}}{Window focus event}{The application is running. The configuration file is valid.}
	{\begin{enumerate}
		\item The user starts a new session recording.
		\item The user focuses a window from an application A.
		\item The user stops the recording.
	\end{enumerate}}
	{\begin{itemize}
		\item A recording has been created and stored at the path specified by the configuration.
		\item The recording contains a focus-window event, that contains the title of application A, along with the timestamp at which the user focused the window, the identifier of the window-management module and the "window:focus" type of the event.
	\end{itemize}}
	
	\test{\fmt{FS70}{FS54}{FS20}{FS30}{FS250}{FS402}}{Window move event}{The application is running. The configuration file is valid.}
	{\begin{enumerate}
		\item The user starts a new session recording.
		\item The user moves a window from an application A.
		\item The user stops the recording.
	\end{enumerate}}
	{\begin{itemize}
		\item A recording has been created and stored at the path specified by the configuration.
		\item The recording contains a move-window event, that contains the title of application A, old and new location of the window along with the timestamp at which the user moved the window, the identifier of the window-management module and the "window:move" type of the event.
	\end{itemize}}
	
	\test{\fmt{FS70}{FS54}{FS20}{FS30}{FS250}{FS403}}{Window resize event}{The application is running. The configuration file is valid.}
	{\begin{enumerate}
		\item The user starts a new session recording.
		\item The user resizes a window from an application A.
		\item The user stops the recording.
	\end{enumerate}}
	{\begin{itemize}
		\item A recording has been created and stored at the path specified by the configuration.
		\item The recording contains a resize-window event, that contains the title of application A, old and new size of the window along with the timestamp at which the user resized the window, the identifier of the window-management module and the "window:resize" type of the event.
	\end{itemize}}
	
	\test{\fmt{FS70}{FS54}{FS20}{FS30}{FS250}{FS404}}{Window maximize/minimize/restore event}{The application is running. The configuration file is valid.}
	{\begin{enumerate}
		\item The user starts a new session recording.
		\item The user maximizes/minimizes/restores a window from an application A.
		\item The user stops the recording.
	\end{enumerate}}
	{\begin{itemize}
		\item A recording has been created and stored at the path specified by the configuration.
		\item The recording contains a maximize-window/minimize-window/restore-window event, that contains the title of application A, the new state of the window - "maximized"/"minimized"/"restored" along with the timestamp at which the user maximized/minimized/restored the window, the identifier of the window-management module and the "window:maximize"/"window:minimize"/"window:restore" type of the event.
	\end{itemize}}
\end{tests}

\subsubsection{Mouse module test cases}

\begin{tests}
	\test{\fmt{FS20}{FS30}{FS54}{FS70}{FS250}{FS411}}{Mouse click event}{The application is running. The configuration file is valid.}
	{\begin{enumerate}
		\item The user starts a new session recording.
		\item The user presses the left/right/middle mouse button in application A.
		\item The user releases the left/right/middle mouse button in application A.
		\item The user stops the recording.
	\end{enumerate}}
	{\begin{itemize}
		\item A recording has been created and stored at the path specified by the configuration.
		\item The recording contains a click-mouse event, that contains type of the clicked button - left/right/middle, type of the click - single, HWND associated with A that was clicked, along with the timestamp at which the user clicked the mouse button, the identifier of the mouse-interaction module and the "mouse:left-click"/"mouse:right-click"/"mouse:middle-click" type of the event.
	\end{itemize}}
	
	\test{\fmt{FS20}{FS30}{FS54}{FS70}{FS250}{FS411}}{Mouse double click event}{The application is running. The configuration file is valid.}
	{\begin{enumerate}
		\item The user starts a new session recording.
		\item The user presses the left mouse button.
		\item The user releases the left mouse button.
		\item The user presses the left mouse button.
		\item The user releases the left mouse button.
		\item The user stops the recording.
	\end{enumerate}}
	{\begin{itemize}
		\item A recording has been created and stored at the path specified by the configuration.
		\item The recording contains a double-click-mouse event, that contains type of the clicked button - left, type of the click - double, HWND associated with A that was clicked, along with the timestamp at which the user double clicked the mouse button, the identifier of the mouse-interaction module and the "mouse:left-double-click" type of the event.
	\end{itemize}}
	
	\test{\fmt{FS20}{FS30}{FS54}{FS70}{FS250}{FS412}}{Mouse scroll event}{The application is running. The configuration file is valid.}
	{\begin{enumerate}
		\item The user starts a new session recording.
		\item The user uses scroll wheel in an application A.
		\item The user stops the recording.
	\end{enumerate}}
	{\begin{itemize}
		\item A recording has been created and stored at the path specified by the configuration.
		\item The recording contains a scroll-mouse event, that contains scroll amount, HWND associated with A that was scrolled, along with the timestamp at which the user used the scroll wheel, the identifier of the mouse-interaction module and the "mouse:scroll" type of the event.
	\end{itemize}}
	
	\test{\fmt{FS20}{FS30}{FS54}{FS70}{FS250}{FS413}}{Mouse move event}{The application is running. The configuration file is valid.}
	{\begin{enumerate}
		\item The user starts a new session recording.
		\item The user moves mouse over an application A.
		\item The user stops the recording.
	\end{enumerate}}
	{\begin{itemize}
		\item A recording has been created and stored at the path specified by the configuration.
		\item The recording contains a move-mouse event, that contains movement vector along with the timestamp at which the user moved the mouse, the identifier of the mouse-interaction module and the "mouse:move" type of the event.
	\end{itemize}}
\end{tests}
