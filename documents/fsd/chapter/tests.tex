\chapter{Global test cases}
\label{ch:tests}

%%Cannot use requirementscope as we have to inject additional text into the label
\newcounter{counterTC}

\makeatletter
\newcommand{\fmt}[1]{(tests \specref{#1}\checknextarg}
\newcommand{\checknextarg}{\@ifnextchar\bgroup{\consumenextarg}{)}}
\newcommand{\consumenextarg}[1]{, \specref{#1}\@ifnextchar\bgroup{\consumenextarg}{)}}
\makeatother

\newcommand{\test}[5]{\addtocounter{counterTC}{10}
\item[TC\arabic{counterTC}\phantomsection\label{TC\arabic{counterTC}}\\\begin{footnotesize}\textit{#1}\end{footnotesize}]
    \begin{itemize}[noitemsep]
        \item[]{\textbf{#2}} %title
        \item[]{Precondition: #3}
        \item[]{Test steps: #4}
        \item[]{Expected result: #5}
    \end{itemize}
}

\newenvironment{tests}{\begin{itemize}[font = \normalfont, style = multiline, labelwidth = 60pt, leftmargin = !]}{\end{itemize}}
    
\begin{tests}
    \test{\fmt{FS10}{FS20}{FS30}}{title text}{precondition text}{test steps text}{expected result text}
\end{tests}

\section{Per-module test cases}

\subsection{System module test cases}

\subsubsection{Window-management module test cases}

\begin{tests}
	\test{\fmt}{Window focus event}{The application is running. The configuration file is valid.}
	{\begin{enumerate}
		\item The user starts a new session recording.
		\item The user focuses a window from an application A.
		\item The user stops the recording.
	\end{enumerate}}
	{\begin{itemize}
		\item A recording has been created and stored at the path specified by the configuration.
		\item The recording contains a focus-window event, that contains the title of application A, along with the timestamp at which the user focused the window, the identifier of the window-management module and the "focus_window" type of the event.
	\end{itemize}}
	
	\test{\fmt}{Window move event}{The application is running. The configuration file is valid.}
	{\begin{enumerate}
		\item The user starts a new session recording.
		\item The user moves a window from an application A.
		\item The user stops the recording.
	\end{enumerate}}
	{\begin{itemize}
		\item A recording has been created and stored at the path specified by the configuration.
		\item The recording contains a move-window event, that contains the title of application A, along with the timestamp at which the user moved the window, the identifier of the window-management module and the "move_window" type of the event.
	\end{itemize}}
	
	\test{\fmt}{Window resize event}{The application is running. The configuration file is valid.}
	{\begin{enumerate}
		\item The user starts a new session recording.
		\item The user resizes a window from an application A.
		\item The user stops the recording.
	\end{enumerate}}
	{\begin{itemize}
		\item A recording has been created and stored at the path specified by the configuration.
		\item The recording contains a resize-window event, that contains the title of application A, along with the timestamp at which the user resized the window, the identifier of the window-management module and the "resize_window" type of the event.
	\end{itemize}}
	
	\test{\fmt}{Window maximize event}{The application is running. The configuration file is valid.}
	{\begin{enumerate}
		\item The user starts a new session recording.
		\item The user maximizes a window from an application A.
		\item The user stops the recording.
	\end{enumerate}}
	{\begin{itemize}
		\item A recording has been created and stored at the path specified by the configuration.
		\item The recording contains a maximize-window event, that contains the title of application A, along with the timestamp at which the user maximized the window, the identifier of the window-management module and the "maximize_window" type of the event.
	\end{itemize}}
	
	\test{\fmt}{Window minimize event}{The application is running. The configuration file is valid.}
	{\begin{enumerate}
		\item The user starts a new session recording.
		\item The user minimizes a window from an application A.
		\item The user stops the recording.
	\end{enumerate}}
	{\begin{itemize}
		\item A recording has been created and stored at the path specified by the configuration.
		\item The recording contains a minimize-window event, that contains the title of application A, along with the timestamp at which the user minimized the window, the identifier of the window-management module and the "minimize_window" type of the event.
	\end{itemize}}
	
	\test{\fmt}{Window restore event}{The application is running. The configuration file is valid.}
	{\begin{enumerate}
		\item The user starts a new session recording.
		\item The user restores a window from an application A.
		\item The user stops the recording.
	\end{enumerate}}
	{\begin{itemize}
		\item A recording has been created and stored at the path specified by the configuration.
		\item The recording contains a restore-window event, that contains the title of application A, along with the timestamp at which the user restored the window, the identifier of the window-management module and the "restore_window" type of the event.
	\end{itemize}}	
\end{tests}



