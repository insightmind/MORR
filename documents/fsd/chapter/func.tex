\chapter{Functional Specifications}
\label{ch:func}

\newcounter{specid}
\newenvironment{specifications}{\newcommand*\spec{\addtocounter{specid}{10}\item[FS\thespecid]}\begin{itemize}}{\end{itemize}}

\section{Purpose}

This chapter is meant to organize and describe the specifications that dictate the way the application functions for different users.

\section{High-level specification}

%% glossary candidates: session, user, event, input-event, recording, converter, administrator, computer, videostream, module
\begin{specifications}
    %% TODO: Link to data section
    \spec{Recording sessions\\The application needs to record and save timed events. All events need to be associated with the session they were recorded in. A session needs to be identifiable.}
    \spec{Event types\\The application needs to be able to handle the recording of different event types. These are more closely described in section \ref{ch:data}.}
    \spec{Event processing\\The application needs to be able to process events it records. This includes filtering events by criteria configured before or during runtime. It also includes matching events from different modules (i.e. a mouse click invokes an action in the browser).}
    \spec{Configurability\\An administrator needs to have the ability to configure the following behavior:
    \begin{itemize}
        \item Filtering\\Discard certain event types globally or context-based
        \item Framerate and video resolution\\The framerate and resolution of the recorded videostream should be configurable to allow the prioritization of either resource efficiency (storage and system load) or quality
        \item Audio\\The recording of audio needs to be toggleable
    \end{itemize}}
    \spec{User controllable\\A user needs to able to start and stop the recording of a session. A stopped recording needs to be saved automatically.}
    \spec{User awareness\\A user needs to be aware if a session is being recorded. The application should therefore indicate an active recording process.}
    \spec{User reviewable\\A user should be able to view recordings of past sessions. An administrator should be able to edit or delete recordings of past sessions.}
    \spec{Data provision\\A data scientist needs to be able to extract the recorded data. If the data is stored in a non-standardized format, the application needs to either provide functionality for converting the data into a standardized format or ship with source code that would allow for such a converter to be written.}
\end{specifications}

\section{Core application specification}
The core application has to cover the following responsibilities:
\begin{specifications}
    \spec{Videostream recording\\Each session recording contains a videostream containing the video-output of the computer in use. The videostream forms the basis for every recording.}
    \spec{System Module invocation\\The application core is responsible for launching system modules based on availability and configuration.}
    \spec{On-demand module detection\\The application core is responsible for listening for incoming connections from on-demand modules which are realized as extensions to third party software, such as browser-extensions.}
    \spec{Data consolidation\\The data received from different modules needs to be stored in the same container.}
    \spec{Combinability of modules\\The core application needs to be able to function with arbitrary combinations of enabled modules. Performance impacts may occur if non-default modules are enabled.}%%Should the performance disclaimer be part of the functional specifications?
\end{specifications}

%% Should we add another section on rule-based and context-specific data filtering here?
%% Our system may have to offer a way to turn on or off modules depending on the current application and website, we may even need a way to define more complex rules

\section{Per-module specification}

This section discusses the default modules which will be available and ship with the application at release in order to fulfill the mandatory requirements.

\subsection{System modules}
System modules are modules which communicate with the operating system. They are invoked as soon as a session is started and only terminate at the end of a session.
\subsubsection{Window-management module}

\begin{specifications}
    \spec{The application should record the following interactions with other application's windows:
    \begin{itemize}
        \item Focusing a window
        \item Moving a window
        \item Resizing a window
        \item Minimizing/Maximizing a window
    \end{itemize}}
\end{specifications}

\subsubsection{Mouse module}

\begin{specifications}
    \spec{The application should record the following interactions with the device's mouse:
    \begin{itemize}
        \item Pressing and releasing the left mouse button
        \item Pressing and releasing the right mouse button
        \item Using the scroll wheel
        \item Moving the mouse
    \end{itemize}}
\end{specifications}

\subsubsection{Keyboard module}

\begin{specifications}
    \spec{The application should record the following interactions with the device's keyboard:
    \begin{itemize}
        \item Pressing and releasing a key
    \end{itemize}}
\end{specifications}

\subsubsection{Clipboard module}

\begin{specifications}
    \spec{The application should record the following interactions with the device's clipboard:
    \begin{itemize}
        \item Copying to and pasting from the clipboard
    \end{itemize}}
\end{specifications}

\subsection{On-demand modules}
On-demand modules are modules which are dynamically run or stopped based on the software they are tracking. These modules need to register with the application core at runtime.
\subsubsection{Browser module}

\begin{specifications}
    \spec{The application should record the following interactions with the browser:
    \begin{itemize}
        \item Opening a new tab
        \item Navigating to a web page
        \item Opening a menu
        \item Selecting a menu item
        \item Entering text into a form or input textbox
        \item Hovering over an element
    \end{itemize}}
\end{specifications}