<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>H:\Documents\data\pse\git\pse-evaluation-team-2\application\Core\MORRTest\Data\Transcoding\MPEG\MPEGEncoderConfigurationTest.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using Microsoft.VisualStudio.TestTools.UnitTesting;
using MORR.Core.Configuration;
using MORR.Core.Data.Transcoding.Mpeg;
using MORR.Shared.Configuration;
using MORR.Shared.Utility;
using MORRTest.TestHelper.Configuration;
using System.Diagnostics;

namespace MORRTest.Data.Transcoding.MPEG
{
    [TestClass]
    public class MpegEncoderConfigurationTest : ConfigurationTest&lt;MpegEncoderConfiguration&gt;
    {
        protected override MpegEncoderConfiguration GenerateDefaultExpectedParsedConfig()
        {
            return new MpegEncoderConfiguration
            {
                Width = 1920,
                Height = 1080,
                FramesPerSecond = 60,
                KiloBitsPerSecond = 4000,
                RelativeFilePath = new FilePath(&quot;desktop_capture.mp4&quot;, true)
            };
        }

        protected override RawConfiguration GenerateDefaultExpectedRawConfig()
        {
            var expectedConfig = GenerateDefaultExpectedParsedConfig();
            Debug.Assert(expectedConfig != null);

            return new RawConfiguration(@&quot;{
                &quot;&quot;Width&quot;&quot;: &quot; + expectedConfig.Width + @&quot;,
                &quot;&quot;Height&quot;&quot;: &quot; + expectedConfig.Height + @&quot;,
                &quot;&quot;KiloBitsPerSecond&quot;&quot;: &quot; + expectedConfig.KiloBitsPerSecond + @&quot;,
                &quot;&quot;FramesPerSecond&quot;&quot;: &quot; + expectedConfig.FramesPerSecond + @&quot;,
                &quot;&quot;RelativeFilePath&quot;&quot;: &quot;&quot;&quot; + expectedConfig.RelativeFilePath + @&quot;&quot;&quot;
            }&quot;);
        }

        [TestMethod]
        public void TestDesktopCaptureConfiguration_ParseFailsInvalidHeight()
        {
            /* PRECONDITION */
            var expectedConfig = GenerateDefaultExpectedParsedConfig();
            Debug.Assert(expectedConfig != null);
            Debug.Assert(Config != null);

            /* GIVEN */
            var config = @&quot;{
                &quot;&quot;Width&quot;&quot;: &quot; + expectedConfig.Width + @&quot;,
                &quot;&quot;KiloBitsPerSecond&quot;&quot;: &quot; + expectedConfig.KiloBitsPerSecond + @&quot;,
                &quot;&quot;FramesPerSecond&quot;&quot;: &quot; + expectedConfig.FramesPerSecond + @&quot;,
                &quot;&quot;RelativeFilePath&quot;&quot;: &quot;&quot;&quot; + expectedConfig.RelativeFilePath + @&quot;&quot;&quot;
            }&quot;;

            var rawConfig = new RawConfiguration(config);

            /* WHEN */
            Assert.ThrowsException&lt;InvalidConfigurationException&gt;(() =&gt; Config.Parse(rawConfig));
        }

        [TestMethod]
        public void TestDesktopCaptureConfiguration_ParseFailsInvalidKiloBits()
        {
            /* PRECONDITION */
            var expectedConfig = GenerateDefaultExpectedParsedConfig();
            Debug.Assert(expectedConfig != null);
            Debug.Assert(Config != null);

            /* GIVEN */
            var config = @&quot;{
                &quot;&quot;Width&quot;&quot;: &quot; + expectedConfig.Width + @&quot;,
                &quot;&quot;Height&quot;&quot;: &quot; + expectedConfig.Height + @&quot;,
                &quot;&quot;FramesPerSecond&quot;&quot;: &quot; + expectedConfig.FramesPerSecond + @&quot;,
                &quot;&quot;RelativeFilePath&quot;&quot;: &quot;&quot;&quot; + expectedConfig.RelativeFilePath + @&quot;&quot;&quot;
            }&quot;;

            var rawConfig = new RawConfiguration(config);

            /* WHEN */
            Assert.ThrowsException&lt;InvalidConfigurationException&gt;(() =&gt; Config.Parse(rawConfig));
        }

        [TestMethod]
        public void TestDesktopCaptureConfiguration_ParseFailsInvalidFPS()
        {
            /* PRECONDITION */
            var expectedConfig = GenerateDefaultExpectedParsedConfig();
            Debug.Assert(expectedConfig != null);
            Debug.Assert(Config != null);

            /* GIVEN */
            var config = @&quot;{
                &quot;&quot;Width&quot;&quot;: &quot; + expectedConfig.Width + @&quot;,
                &quot;&quot;Height&quot;&quot;: &quot; + expectedConfig.Height + @&quot;,
                &quot;&quot;KiloBitsPerSecond&quot;&quot;: &quot; + expectedConfig.KiloBitsPerSecond + @&quot;,
                &quot;&quot;RelativeFilePath&quot;&quot;: &quot;&quot;&quot; + expectedConfig.RelativeFilePath + @&quot;&quot;&quot;
            }&quot;;

            var rawConfig = new RawConfiguration(config);

            /* WHEN */
            Assert.ThrowsException&lt;InvalidConfigurationException&gt;(() =&gt; Config.Parse(rawConfig));
        }

        [TestMethod]
        public void TestDesktopCaptureConfiguration_ParseFailsInvalidFilePath()
        {
            /* PRECONDITION */
            var expectedConfig = GenerateDefaultExpectedParsedConfig();
            Debug.Assert(expectedConfig != null);
            Debug.Assert(Config != null);

            /* GIVEN */
            var config = @&quot;{
                &quot;&quot;Width&quot;&quot;: &quot; + expectedConfig.Width + @&quot;,
                &quot;&quot;Height&quot;&quot;: &quot; + expectedConfig.Height + @&quot;,
                &quot;&quot;KiloBitsPerSecond&quot;&quot;: &quot; + expectedConfig.KiloBitsPerSecond + @&quot;,
                &quot;&quot;FramesPerSecond&quot;&quot;: &quot; + expectedConfig.FramesPerSecond + @&quot;
            }&quot;;

            var rawConfig = new RawConfiguration(config);

            /* WHEN */
            Assert.ThrowsException&lt;InvalidConfigurationException&gt;(() =&gt; Config.Parse(rawConfig));
        }

        [TestMethod]
        public void TestDesktopCaptureConfiguration_ParseFailsInvalidWidth()
        {
            /* PRECONDITION */
            var expectedConfig = GenerateDefaultExpectedParsedConfig();
            Debug.Assert(expectedConfig != null);
            Debug.Assert(Config != null);

            /* GIVEN */
            var config = @&quot;{
                &quot;&quot;Height&quot;&quot;: &quot; + expectedConfig.Height + @&quot;,
                &quot;&quot;KiloBitsPerSecond&quot;&quot;: &quot; + expectedConfig.KiloBitsPerSecond + @&quot;,
                &quot;&quot;FramesPerSecond&quot;&quot;: &quot; + expectedConfig.FramesPerSecond + @&quot;,
                &quot;&quot;RelativeFilePath&quot;&quot;: &quot;&quot;&quot; + expectedConfig.RelativeFilePath + @&quot;&quot;&quot;
            }&quot;;

            var rawConfig = new RawConfiguration(config);

            /* WHEN */
            Assert.ThrowsException&lt;InvalidConfigurationException&gt;(() =&gt; Config.Parse(rawConfig));
        }
    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[15,9,15,10,1],[16,13,23,15,1],[24,9,24,10,1],[27,9,27,10,1],[28,13,28,72,1],[29,13,29,50,1],[31,13,37,17,1],[38,9,38,10,1],[42,9,42,10,1],[44,13,44,72,1],[45,13,45,50,1],[46,13,46,42,1],[49,13,54,16,1],[56,13,56,58,1],[59,13,59,73,1],[59,73,59,96,1],[59,96,59,98,1],[59,13,59,98,1],[60,9,60,10,1],[64,9,64,10,1],[66,13,66,72,1],[67,13,67,50,1],[68,13,68,42,1],[71,13,76,16,1],[78,13,78,58,1],[81,13,81,73,1],[81,73,81,96,1],[81,96,81,98,1],[81,13,81,98,1],[82,9,82,10,1],[86,9,86,10,1],[88,13,88,72,1],[89,13,89,50,1],[90,13,90,42,1],[93,13,98,16,1],[100,13,100,58,1],[103,13,103,73,1],[103,73,103,96,1],[103,96,103,98,1],[103,13,103,98,1],[104,9,104,10,1],[108,9,108,10,1],[110,13,110,72,1],[111,13,111,50,1],[112,13,112,42,1],[115,13,120,16,1],[122,13,122,58,1],[125,13,125,73,1],[125,73,125,96,1],[125,96,125,98,1],[125,13,125,98,1],[126,9,126,10,1],[130,9,130,10,1],[132,13,132,72,1],[133,13,133,50,1],[134,13,134,42,1],[137,13,142,16,1],[144,13,144,58,1],[147,13,147,73,1],[147,73,147,96,1],[147,96,147,98,1],[147,13,147,98,1],[148,9,148,10,1]]);
    </script>
  </body>
</html>